<?php





$dberror="Failure";

$db= new mysqli_connect("localhost","ronldgrowe","ronjonjoe","temperaturehumidityreadings");

$result=mysql_query("SELECT * FROM TempData ORDER BY dtg DESC LIMIT 100");

echo $result;

while($row = mysql_fetch_assoc($result)){
$Dtemp[] = $row['temp'];
$Dtemp2[] = $row['temp2'];
$Dhumidity[] = $row['humidity'];
$Dhumidity2[] = $row['humidity2'];
$Dh2oTemp1[] = $row['h2oTemp1'];
$Dh2oTemp2[] = $row['h2oTemp2'];
$datel[] = $row['dtg'];
$date = date_parse($row['dtg']);
$hrs = "hrs"; $slsh = "/";
$dated = $date['hour'] . $hrs . $date['month'] . $slsh . $date['day'];
$Ddtg[] = $dated;
}









?>
<DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable(
          <?php echo $result;?>
        );

        var options = {
          title: 'Environment for 24hrs',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="curve_chart" style="width: 900px; height: 500px"></div>
  </body>
</html>
